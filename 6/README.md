# Задачи върху `dup`, `fork` и `exec`

(**Забележка**: `...` означава неограничен брой аргументи, а `[a|b|c]` означава "*или* `a`, *или* `b`, *или* `c`")

1. Напишете програма `count`, която изпълнява командата `wc` по различни начини в зависимост от подадените аргументи:

	* ако аргументите са `chars FILE...`, то да се изпълни `wc -c FILE...`;
	* ако аргументите са `words FILE...`, то да се изпълни `wc -w FILE...`;
	* ако аргументите са `lines FILE...`, то да се изпълни `wc -l FILE...`.

2. Напишете програма `wc2`, която изпълнява командата `wc [-c|-w|-l] FILE`, но без да извежда името на файла `FILE` (в случая само един), подаден като аргумент.
	**Подсказка**: Използвайте пренасочване на стандартния вход.

3. Да се напише програма `catwc`, която изпълнява `cat` и след това `wc -c` върху всеки от файловете, подадени като командни аргументи.  `cat` трябва да се изпълни преди `wc`, а редът, в който са посочени файловете, няма значение:

		$ catwc FILE...

4. Да се напишат по конкурентен начин следните програми, като `gennum` трябва да използва `helper`, за да създава отделните файлове, а `sumnum` да използва файловете, генерирани от `gen`:

        $ gennum N M
        $ sumnum N M
        $ helper FILENO START LENGTH

`gennum` създава файловете `1`, `2`, ..., `N`, които съдържат следните числа, посочени вдясно от двоеточията, в бинарен формат:

        1: 1 2 3 ... M
        2: M+1 M+2 ... 2M
        ...
        N: (N-1)M+1 (N-1)M+2 ... NM

`sumnum` създава файловете `1.sum`, `2.sum`, ..., `N.sum`, които съдържат следните числа, посочени вдясно от двоеточията (получени след извършването на съответните сумирания), в бинарен формат:

        1.sum: 1+2+3+...+M
        2.sum: (M+1)+(M+2)+...+2M
        ...
        N.sum: ((N-1)M+1)+((N-1)M+2)+...+NM

5. Защо output-ът на следната програма е `Gidday world`?  Обосновете отговора си.

#include <unistd.h>
#include <fcntl.h>

int main(int argc, const char* const* argv)
{
    if (argc < 2)
        return 1;

    int fd1 = open(argv[1], O_RDWR | O_CREAT | O_TRUNC, S_IRUSR | S_IWUSR);
    int fd2 = dup(fd1);
    int fd3 = open(argv[1], O_RDWR);
    write(fd1, "Hello,", 6);
    write(fd2, " world", 6);
    lseek(fd2, 0, SEEK_SET);
    write(fd1, "HELLO,", 6);
    write(fd3, "Gidday", 6);
    return 0;
}
